<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="basic_robot">

<param name="robot_description"
  command="xacro '$(find new_robot_urdf)/urdf/myrobot.urdf.xacro'" />

<!--colors-->
<material name ="blue">
    <color rgba=" 0 0 0.8 1"/>
</material>

<!--All Xacro Macros-->

<!--xacro macro for base-->
<xacro:property name="length" value="1.0" />
<xacro:property name="width" value="1.0" />
<xacro:property name="height" value="0.1" />
<xacro:property name="base_origin" value="0 0 0.1" />

<!--xacro macro for inertia base-->
<xacro:macro name="base_inertial" params="mass">
    <inertial>
      <mass value="${mass}" />
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0" />
    </inertial>
</xacro:macro>

<!--Wheel Macros-->
<xacro:property name="wheel_origin_rpy" value="1.57075 0 0" />
<xacro:property name="wheel_len" value="0.1" />
<xacro:property name="wheel_radius" value="0.1" />

<!--xacro macro for inertia wheels-->
<xacro:macro name="wheel_inertia" params="mass">
    <inertial>
      <mass value="${mass}" />
    <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
</xacro:macro>

<!--xacro macro for right_front_wheel_joint-->
<xacro:property name="wheel_axis" value="0 1 0" />
<xacro:property name="right_front_wheel_joint_xyz" value="0.40 0.5 0.1" />

<!--xacro macro for left_front_wheel_joint-->
<xacro:property name="left_front_wheel_joint_xyz" value="0.4 -0.5 0.1" />

<!--xacro macro for right_back_wheel_joint-->
<xacro:property name="right_back_wheel_joint_xyz" value="-0.4 0.5 0.1" />

<!--xacro macro for left_back_wheel_joint-->
<xacro:property name="left_back_wheel_joint_xyz" value="-0.4 -0.5 0.1" />

<!-- Dummy link to get rid of  base_link has an inertia specified in the URDF error -->
<link name="dummy"/>

<!-- Dummy joint to get rid of  base_link has an inertia specified in the URDF error -->
<joint name="dummy_joint" type="fixed">
  <parent link="dummy" />
  <child link="base_link" />
</joint>

<link name="base_link">
    <visual>
    <origin xyz="${base_origin}"/>
      <geometry>
         <box size="${length} ${width} ${height}"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="${base_origin}"/>
      <geometry>
         <box size="${length} ${width} ${height}"/>
      </geometry>
    </collision>
    <xacro:base_inertial mass="10"/>
</link>



<link name="right_front_wheel">
    <visual>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
         <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
    </collision>
    <xacro:wheel_inertia mass="1"/>
</link>

<joint name="right_front_wheel_joint" type="continuous">
    <parent link="base_link" />
    <child link="right_front_wheel" />
    <axis xyz="${wheel_axis}"/>
    <origin rpy="0 0 0 " xyz="${right_front_wheel_joint_xyz}"/>
</joint>


<link name="left_front_wheel">
    <visual>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
    </collision>
    <xacro:wheel_inertia mass="1"/>
</link>

<joint name="left_front_wheel_joint" type="continuous">
    <parent link="base_link" />
    <child link="left_front_wheel" />
    <axis xyz="${wheel_axis}"/>
    <origin rpy="0 0 0" xyz="${left_front_wheel_joint_xyz}"/>
</joint>

<link name="right_back_wheel">
    <visual>
      <origin rpy="${wheel_origin_rpy}" />
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="${wheel_origin_rpy}" />
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
    </collision>
    <xacro:wheel_inertia mass="1"/>
</link>

<joint name="right_back_wheel_joint" type="continuous">
    <parent link="base_link" />
    <child link="right_back_wheel" />
    <axis xyz="${wheel_axis}"/>
    <origin rpy="0 0 0" xyz="${right_back_wheel_joint_xyz}"/>
</joint>

<link name="left_back_wheel">
    <visual>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="${wheel_origin_rpy}"/>
      <geometry>
        <cylinder length="${wheel_len}" radius="${wheel_radius}"/>
      </geometry>
    </collision>
    <xacro:wheel_inertia mass="1"/>
</link>

<joint name="left_back_wheel_joint" type="continuous">
    <parent link="base_link" />
    <child link="left_back_wheel" />
    <!-- axis on which it will move -->
    <axis xyz="${wheel_axis}"/>
    <origin rpy="0 0 0" xyz="${left_back_wheel_joint_xyz}"/>
  </joint>

  <!-- Gazebo plugin for ROS Control -->
  <gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/</robotNamespace>
    </plugin>
  </gazebo>

</robot>
